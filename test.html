<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF8">
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.min.js"></script>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/dc/1.7.5/dc.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="../static/css/dc.css" media="screen" />
</head>
<body>
  <div>
    <h2>Bar Chart</h2></div>
  <div id="barchart"></div>
  <div id="barchart2"></div>
  <script>
    var data = [{
      state: "NJ",
      fund: 2811.59
    }, {
      state: "NC",
      fund: 449.98
    }, {
      state: "NY",
      fund: 174.53
    }, {
      state: "NC",
      fund: 500.32
    }, {
      state: "MD",
      fund: 420.87
    }, {
      state: "OR",
      fund: 2300.71
    }, {
      state: "PA",
      fund: 360.59
    }, {
      state: "NY",
      fund: 508.91
    }, {
      state: "PA",
      fund: 454.91
    }, {
      state: "PA",
      fund: 357.85
    }]
    var ndx = crossfilter(data);
    var stateDim = ndx.dimension(function(d) {
      return d.state;
    });
    var state_funds = stateDim.group().reduceSum(function(d) {
      return d.fund;
    });
    var fundinglineChart = dc.lineChart("#barchart");
    fundinglineChart
      .width(500).height(200)
      .dimension(stateDim)
      .renderArea(true)
      .x(d3.scale.linear().domain([0, data.length + 1]))
      .dimension(stateDim)
      .group(state_funds)
      .brushOn(true)
      .legend(dc.legend().x(50).y(10).itemHeight(13).gap(5))
      .yAxisLabel("Funding by State")
      .xAxisLabel("State")
      .elasticX(true);
    dc.renderAll();
  </script>
</body>
</html>
